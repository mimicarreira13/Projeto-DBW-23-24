"use strict";import express from"express";import methodOverride from"method-override";import mongoose from"mongoose";import fetchRoute from"./routes/fetchRoute.js";import homeRoute from"./routes/homeRoute.js";import instrucoesRoute from"./routes/instrucoesRoute.js";import minhaContaRoute from"./routes/minhaContaRoute.js";import sobreRoute from"./routes/sobreRoute.js";import novidadesRoute from"./routes/novidadesRoute.js";import userRoute from"./routes/userRoute.js";import jogoMemoriaRoute from"./routes/jogoMemoriaRoute.js";import pontuacaoRoute from"./routes/pontuacaoRoute.js";import path from"path";import{fileURLToPath}from"url";import passport from"passport";import localStrategy from"passport-local";import session from"express-session";import*as users from"./models/users.js";const app=express();app.use(express.json());const __filename=fileURLToPath(import.meta.url),__dirname=path.dirname(__filename);app.set("view engine","ejs"),app.use(express.static(__dirname+"/public")),app.use(express.urlencoded({extended:!0})),app.use(methodOverride("_method")),app.use(session({secret:"your-secret-key",resave:!1,saveUninitialized:!1}));const userModel=users.getUserModel();passport.use(new localStrategy(userModel.authenticate())),passport.serializeUser(userModel.serializeUser()),passport.deserializeUser(userModel.deserializeUser()),app.use(passport.initialize()),app.use(passport.session()),mongoose.connect("mongodb+srv://Grupo08:DBW_2024@projetodbw.oxsfjpx.mongodb.net/DBW?retryWrites=true&w=majority&appName=ProjetoDBW").then((()=>{console.log("Connected")})).catch((err=>{console.log(err)})),app.use(homeRoute),app.use(instrucoesRoute),app.use(fetchRoute),app.use(minhaContaRoute),app.use(sobreRoute),app.use(novidadesRoute),app.use(userRoute),app.use(jogoMemoriaRoute),app.use(pontuacaoRoute),app.listen(4e3,(function(err){err&&console.log(err),console.log("Server listening on PORT",4e3)}));